<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Here is the data from Microsoft Graph !!</title>
</head>
<body  style="background-color:black;color:white;font-family: Segoe UI Light;">
<center>


<h1>
Hi!!!, <u>{{ displayName}}</u> welcome to Alerts Management Portal
</h1>
</center>
<!---
<p1><b>User Data:</b> </p1>
<table>
{% for key, value in graph_data.items() %}
   <tr>
        <th> {{ key }} </th>
        <td> {{ value }} </td>
   </tr>
{% endfor %}
</table>
-->
<center>
<button onclick="show_alerts()">My Subscriptions</button>
<button onclick="show_alertLog()">Previous Alerts</button>
<button onclick="create_alert()">Create Alert</button>

</center>
<div id="alerts" style="display:None;">

{{ alerts | safe }}
</div>
<div id="alertLog" style="display:None;">
{{ alertLog | safe }}
</div>
</body>
</html>

<div id="create_alert" style="display:None;">
<form method="POST">
    Alert me on <input name="phone"> when 
    <select name="options_parameter">
  <option value="temperature">Temperature</option>
  <option value="pressure">Pressure</option>
  <option value="humidity">Humidity</option>
 
</select>
    <select name="options_condition">
  <option value="gte">>=</option>
  <option value="lte"><=</option>
  <option value="equal">=</option>
 
</select>
        

 <input name="temperature_value">
   <input name="email" value='{{ userPrincipalName }}' type='hidden'>
   <input name="displayName" value= '{{ displayName }}' type='hidden'>
    <input type="submit" value='Create Alert'>
</form>
</div>
<script>
function show_alerts() {
  var x = document.getElementById("alerts");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
function show_alertLog() {
  var x = document.getElementById("alertLog");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
function create_alert() {
  var x = document.getElementById("create_alert");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>